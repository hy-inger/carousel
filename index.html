<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <style>
            .carousel{
                width: 600px;
                height: 400px;
                margin:0 auto;
                overflow: hidden;
                position: relative;
            }
            .carousel .carousel-inner{
                width: 600px;
                height: 400px;
                position: relative;

            }
            .carousel .carousel-inner .item{
                width: 600px;
                height: 400px;
                position: relative;
                display: none;
                left: 0;
                transition:left 3s;
            }
            .carousel .carousel-inner .item.active{
                display: block;
                left: 0;
            }
            .carousel .carousel-inner .active.left{
                left: -100%;
            }
            .carousel .carousel-inner .item.next{
                display: block;
                position: absolute;
                top:0;
                left:100%;
                width: 100%;
            }
            .carousel .carousel-inner .next.left{
                left: 0;
            }

            .carousel .carousel-inner img{
                width: 100%;
                height: 100%;
            }
            .carousel .btn-wrap .wrap{
                z-index: 222;
                position: absolute;
                font-size: 80px;
                color:#fff;
                top:50%;
                margin-top: -45px;
                cursor: pointer;
            }
            .carousel .btn-wrap .left{
                left: 10px;
            }
            .carousel .btn-wrap .right{
                right: 10px;
            }
            .clearfix:after{
                content: '';
                display: block;
                line-height: 0;
                height: 0;
                clear: both;
                visibility: hidden;
            }
        </style>
    </head>
    <body>
        <div class="carousel">
            <div class="carousel-inner clearfix" id="carousel-inner">
                <div class="item active">
                    <img src="img/1.jpg"/>
                </div>
                <div class="item">
                    <img src="img/2.jpg"/>
                </div>
                <div class="item">
                    <img src="img/3.jpg"/>
                </div>
            </div>
            <div class="btn-wrap">
                <i class="wrap left" id="left"> < </i>
                <i class="wrap right" id="right"> > </i>
            </div>
        </div>
    </body>
    <script type="text/javascript" src="basic.js"></script>
    <script type="text/javascript">
        window.onload = function(){
            var left = document.getElementById('left');
            var right = document.getElementById('right');
            var carousel_inner = document.getElementById('carousel-inner');
            var item = carousel_inner.querySelectorAll('.item');
            addEvent(right,'click',function(){
                for(var i=0;i<item.length;i++){
                    var ele = item[i];
                    if(hasClass(ele,'active')&&(i+1<item.length)){
                        var width = item[i].offsetWidth;
                        var current_left = ele.offsetLeft;
                        var left = width*(i+1);
                        var incream = width/(1000/10);
                        addClass(ele,'left');
                        addClass(item[i+1],'next');
                        removeClass(ele,'active');
                        addClass(item[i+1],'left');
                        removeClass(item[i+1],'next');
                        //item[i+1].style.left = '0px';
                        //removeClass(ele,'active');
                        //addClass(item[i+1],'active');
                        /*slideLeft(ele,current_left,incream,width,function(){
                            removeClass(ele,'active');
                            if(i+1<item.length){
                                addClass(item[i+1],'active');
                            }
                        })*/
                        break;
                    }
                }
            });
            function slideLeft (ele,current_left,incream,left,callback){
                var timer = setTimeout(function(){
                    current_left -=incream;
                    ele.style.left = current_left+'px';
                    clearInterval(timer);
                    if(-current_left>=left){
                        callback();
                    } else {
                        slideLeft(ele,current_left,incream,left,callback);
                    }
                },10);
            }
            function slideRight (ele,current_left,left){
                var timer = setTimeout(function(){
                    current_left -=incream;
                    ele.style.left = current_left+'px';
                    clearInterval(timer);
                    if(-current_left>=left){
                        callback();
                    } else {
                        slideLeft(ele,current_left,incream,left,callback);
                    }
                },10);
            }
        }
        var Carousel = (function(){

        })();
    </script>
</html>